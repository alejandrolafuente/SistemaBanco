<div *ngIf="!mostrarConfirmacao">
    <h1 class="text-center">Cadastro de Gerente</h1><br>
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div *ngIf="erroMensagem" class="alert alert-danger alert-dismissible fade show" role="alert">
                {{erroMensagem}}
                <button type="button" class="close" data-dismiss="alert" aria-label="Close" (click)="erroMensagem = ''">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="row justify-content-center">

                <div class="col-md-8">
                    <div class="border p-4 rounded-3">
                        <h5 class="text-center">Dados do Gerente</h5>
                        <form #formCadastro="ngForm">

                            <div class="form-group">
                                <label for="nome">Nome:</label>
                                <input type="text" class="form-control" id="nome" name="nome" [(ngModel)]="gerente.nome"
                                    #nome="ngModel" maxlength="60" required>
                                <div *ngIf="nome.errors && (nome.dirty || nome.touched)" class="alert alert-danger">
                                    <div [hidden]="!nome.errors['required']">
                                        Digite o nome
                                    </div>
                                </div>
                            </div>
                            <br>

                            <div class="form-group">
                                <label for="cpf">CPF:</label>
                                <input type="text" class="form-control" id="cpf" name="cpf" [(ngModel)]="gerente.cpf"
                                    #cpf="ngModel" readonly mask="000.000.000-00" required
                                    (blur)="verificarCpf(gerente.cpf)" (input)="cpfMessage = ''">
                                <div class="mt-2">
                                    <button type="button" class="btn btn-light btn-sm"
                                        (click)="gerarCPFValido()">
                                        <i class="fa fa-magic" aria-hidden="true"></i> Gerar CPF Válido
                                    </button>
                                </div>
                                <div *ngIf="cpf.errors && (cpf.dirty || cpf.touched)" class="alert alert-danger">
                                    <div [hidden]="!cpf.errors['required']">
                                        Gere o cpf!
                                    </div>
                                </div>

                                <div *ngIf="cpfMessage" class="alert alert-danger mt-2">
                                    {{cpfMessage}}
                                </div>
                            </div>
                            <br>

                            <div class="form-group">
                                <label for="email">Email:</label>
                                <input type="email" class="form-control" id="email" name="email"
                                    [(ngModel)]="gerente.email" #email="ngModel" maxlength="60" email required
                                    (blur)="verificarEmail(gerente.email)" (input)="emailMessage = ''">
                                <div *ngIf="email.errors && (email.dirty || email.touched)" class="alert alert-danger">
                                    <div [hidden]="!email.errors['required']">
                                        Digite o email
                                    </div>
                                    <div *ngIf="email.errors?.['email']">
                                        Formato de email inválido
                                    </div>
                                </div>

                                <div *ngIf="emailMessage" class="alert alert-danger mt-2">
                                    {{emailMessage}}
                                </div>
                            </div>
                            <br>

                            <div class="form-group">
                                <label for="telefone">Telefone (apenas números):</label>
                                <input type="text" class="form-control" id="telefone" name="telefone"
                                    [(ngModel)]="gerente.telefone" #telefone="ngModel" mask="(00) 00000-0000"
                                    minlength="11" required>
                                <div *ngIf="telefone.errors && (telefone.dirty || telefone.touched)"
                                    class="alert alert-danger">
                                    <div [hidden]="!telefone.errors['required']">
                                        Digite o telefone
                                    </div>

                                    <div *ngIf="telefone.value && telefone.value.length < 11">
                                        Telefone incompleto
                                    </div>
                                </div>
                            </div>
                            <br>
                        </form>
                    </div>
                </div>
            </div>

            <!-- botao cadastro-->
            <div class="row mt-4">
                <div class="col-md-12">
                    <div class="d-flex justify-content-center">
                        <button type="button" class="btn btn-primary" [disabled]="!formCadastro.form.valid"
                            (click)="cadastrar()">
                            <i class="fa fa-save" aria-hidden="true"></i> Cadastrar Gerente
                        </button>
                    </div>
                </div>
            </div><br>
        </div>
    </div>
</div>

<!-- componente de confirmacao visivel apenas quando esta em confirmacao -->
<app-confirmacao-cadastro *ngIf="mostrarConfirmacao" [dados]="dadosConfirmacao" (onConfirmar)="confirmarEnvio()"
    (onEditar)="voltarParaEdicao()" (onCancelar)="voltarParaEdicao()">
</app-confirmacao-cadastro>